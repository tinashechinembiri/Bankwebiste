{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\tinas\\\\OneDrive\\\\Desktop\\\\Tinashe Chinembiri\\\\ReactApi\\\\apiinterface\\\\src\\\\Components\\\\Registration.js\";\nimport React, { Component } from 'react';\nimport Registration_account from \"./Registration/Registration_account\";\nimport RegistrationUsername from \"./Registration/RegisterUsername\";\nconst url_Allaccount = 'ApiAutomationHost/rest/account/account/Userdata';\nconst post_account = '/ApiAutomationHost/rest/account/account/registration';\n\nclass Registration extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = async event => {\n      const _event$target = event.target,\n            name = _event$target.name,\n            value = _event$target.value;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.Registration_checkdata = () => {\n      fetch(url_Allaccount).then(response => {\n        return response.json();\n      }).then(data => this.setState({\n        User_data: data\n      }, console.log(data)));\n    };\n\n    this.Submit_Registration = event => {\n      event.preventDefault();\n      var passencrpt = this.state.password;\n      var ids = 1 + this.state.User_data.length;\n      const create_user = Object.create(null, {\n        id: {\n          value: ids,\n          enumerable: true\n        },\n        account_number: {\n          value: this.state.account,\n          enumerable: true\n        },\n        lastname: {\n          value: this.state.lastname,\n          enumerable: true\n        },\n        username: {\n          value: this.state.username,\n          enumerable: true\n        },\n        password: {\n          value: passencrpt,\n          enumerable: true\n        },\n        firstName: {\n          value: this.state.firstName\n        },\n        account: []\n      });\n      fetch(post_account, {\n        method: 'POST',\n        headers: new Headers({\n          'Accept': 'application/json, text/plain, */*',\n          'Content-type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }),\n        body: JSON.stringify(create_user)\n      }).then(response => response).then(data => {\n        console.log(data);\n\n        if (data.status === 200) {\n          this.props.history.push('/login');\n        } else {\n          console.log(\"Failed Log in \");\n        }\n      });\n      console.log(create_user);\n    };\n\n    this.previousButton = () => {\n      let currentStep = this.state.currentStep;\n\n      if (currentStep !== 1) {\n        this._prev(this);\n      }\n\n      return null;\n    };\n\n    this.nextButton = () => {\n      let currentStep = this.state.currentStep;\n      console.log(currentStep);\n\n      if (currentStep <= 2) {\n        this._next();\n      }\n\n      return null;\n    };\n\n    this.state = {\n      currentStep: 1,\n      username: '',\n      firstName: '',\n      lastname: '',\n      password: '',\n      account: null,\n      User_data: []\n    };\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  componentWillMount() {\n    this.Registration_checkdata();\n  }\n\n  _next() {\n    let currentStep = this.state.currentStep;\n    currentStep = currentStep >= 1 ? 2 : currentStep + 1;\n    this.setState({\n      currentStep: currentStep\n    });\n  }\n\n  _prev() {\n    let currentStep = this.state.currentStep;\n    currentStep = currentStep <= 1 ? 1 : currentStep - 1;\n    this.setState({\n      currentStep: currentStep\n    });\n  }\n\n  render() {\n    console.log(this.state.User_data.length);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, \"Registration\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, \"Step \", this.state.currentStep, \" \"), React.createElement(\"form\", {\n      onSubmit: event => this.Submit_Registration(event),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(Registration_account, {\n      currentStep: this.state.currentStep,\n      handleChange: event => this.handleChange(event),\n      account: this.props.account,\n      firstName: this.props.firstName,\n      lastname: this.state.lastname,\n      nextButton: this.nextButton,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }), React.createElement(RegistrationUsername, {\n      currentStep: this.state.currentStep,\n      handleChange: event => this.handleChange(event),\n      username: this.state.username,\n      password: this.state.password,\n      previousButton: this.previousButton,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default Registration;","map":{"version":3,"sources":["C:\\Users\\tinas\\OneDrive\\Desktop\\Tinashe Chinembiri\\ReactApi\\apiinterface\\src\\Components\\Registration.js"],"names":["React","Component","Registration_account","RegistrationUsername","url_Allaccount","post_account","Registration","constructor","props","handleChange","event","target","name","value","setState","Registration_checkdata","fetch","then","response","json","data","User_data","console","log","Submit_Registration","preventDefault","passencrpt","state","password","ids","length","create_user","Object","create","id","enumerable","account_number","account","lastname","username","firstName","method","headers","Headers","body","JSON","stringify","status","history","push","previousButton","currentStep","_prev","nextButton","_next","bind","componentWillMount","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport Registration_account  from \"./Registration/Registration_account\"; \r\nimport RegistrationUsername from \"./Registration/RegisterUsername\"; \r\n\r\nconst url_Allaccount = 'ApiAutomationHost/rest/account/account/Userdata'; \r\nconst post_account = '/ApiAutomationHost/rest/account/account/registration'; \r\nclass Registration extends Component\r\n{\r\n    constructor(props)\r\n    {\r\n        super(props)\r\n        this.state = {\r\n            currentStep: 1,\r\n            username: '', \r\n            firstName:'',\r\n            lastname:'', \r\n            password:'', \r\n            account: null, \r\n            User_data: []\r\n\r\n        }\r\n        this.handleChange = this.handleChange.bind(this)\r\n    }\r\n\r\n    handleChange = async(event) => {\r\n\r\n        const {name, value} = event.target\r\n        this.setState({\r\n          [name]: value, \r\n        })    \r\n      }\r\n\r\n    componentWillMount()\r\n    {\r\n      \r\n      this.Registration_checkdata();         \r\n    }\r\n\r\n    Registration_checkdata = () => \r\n    {\r\n       fetch(url_Allaccount)\r\n      .then(response => {return response.json()})\r\n      .then(data => this.setState({User_data:data}, console.log(data)) )\r\n\r\n    }\r\n\r\n    _next()\r\n    {\r\n      let currentStep = this.state.currentStep; \r\n    \r\n\r\n\r\n      currentStep = currentStep >= 1?2 : currentStep + 1;  \r\n      this.setState(\r\n        {\r\n          currentStep:currentStep\r\n        }\r\n      )\r\n    }\r\n\r\n\r\n    Submit_Registration = (event) => \r\n    {\r\n      event.preventDefault(); \r\n      var passencrpt = this.state.password; \r\n      var ids = 1+ this.state.User_data.length; \r\n      \r\n      const create_user = Object.create(\r\n        null,\r\n        {\r\n          id : {value: ids , enumerable: true}, \r\n          account_number:{value: this.state.account, enumerable:true}, \r\n          lastname :{value:this.state.lastname, enumerable: true},\r\n          username :{value:this.state.username, enumerable: true},\r\n          password:{value:passencrpt, enumerable:true},\r\n          firstName:{value:this.state.firstName}, \r\n          account: []\r\n          \r\n\r\n        }); \r\n\r\n        fetch (post_account, \r\n          {\r\n            method: 'POST',\r\n            headers: new Headers({\r\n                'Accept': 'application/json, text/plain, */*',\r\n                'Content-type': 'application/json',\r\n                'Access-Control-Allow-Origin': '*'\r\n             }),\r\n             body:JSON.stringify(create_user)\r\n          }\r\n          \r\n          )\r\n          .then ((response) => response)\r\n         .then(data => {\r\n            console.log(data)\r\n             if(data.status === 200)\r\n               {\r\n                this.props.history.push('/login')\r\n                \r\n                 \r\n                } \r\n                else\r\n                {\r\n                        console.log(\"Failed Log in \")\r\n                }   \r\n            }); \r\n         \r\n\r\n\r\n\r\n        console.log(create_user); \r\n    }\r\n\r\n    _prev(){\r\n        let currentStep = this.state.currentStep; \r\n        currentStep = currentStep <= 1? 1 : currentStep - 1; \r\n\r\n        this.setState(\r\n          {\r\n            currentStep: currentStep \r\n          }\r\n        )\r\n    }\r\n\r\n     previousButton = () => \r\n    {\r\n      let currentStep = this.state.currentStep; \r\n\r\n      if (currentStep !== 1)\r\n      {\r\n       \r\n         this._prev(this)\r\n        \r\n      }\r\n      return null; \r\n    }\r\n\r\n     nextButton = () => {\r\n       \r\n      let currentStep = this.state.currentStep; \r\n      console.log(currentStep)\r\n\r\n      if (currentStep <= 2)\r\n      {\r\n      \r\n       this._next(); \r\n      }\r\n      \r\n      return null; \r\n\r\n    }\r\n\r\n\r\n    render()\r\n    {\r\n      console.log(this.state.User_data.length); \r\n\r\n\r\n        return(\r\n            <div>\r\n\r\n            <h1>Registration</h1>\r\n            <p>Step {this.state.currentStep} </p> \r\n            <form onSubmit={(event) => this.Submit_Registration(event)}>\r\n            \r\n              <Registration_account\r\n              currentStep = {this.state.currentStep}\r\n              handleChange = {(event) => this.handleChange(event)}  \r\n              account = {this.props.account}\r\n              firstName = {this.props.firstName}\r\n              lastname = {this.state.lastname}\r\n              nextButton = {this.nextButton}\r\n              />\r\n\r\n              <RegistrationUsername\r\n\r\n               currentStep = {this.state.currentStep}\r\n               handleChange = {(event) => this.handleChange(event)}\r\n               username = {this.state.username}\r\n               password = {this.state.password}\r\n               previousButton ={this.previousButton}\r\n              \r\n              />\r\n\r\n             \r\n              </form>\r\n            </div>\r\n\r\n\r\n        );\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default Registration; "]},"metadata":{},"sourceType":"module"}